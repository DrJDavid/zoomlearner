# Phase 1.1: Core Services Setup Checklist

## Overview
This phase focuses on creating the foundational service layer for our React migration. We'll create the ReaderService and AuthService while keeping the existing vanilla JS implementation intact.

## Prerequisites
- [ ] Verify existing files:
  - [ ] Check `src/lib/RSVPReader.ts` exists and is working
  - [ ] Check `src/lib/supabase.ts` exists and is working
  - [ ] Document current file locations and dependencies

## Implementation Steps

### 1. Directory Setup
- [ ] Create `src/services` directory
- [ ] Add `.gitkeep` to ensure directory is tracked

### 2. ReaderService Implementation
- [ ] Create `src/services/ReaderService.ts`
- [ ] Add imports:
  ```typescript
  import { RSVPReader } from '../lib/RSVPReader';
  import EventEmitter from 'events';
  ```
- [ ] Implement ReaderService class:
  - [ ] Add private properties (reader, eventEmitter)
  - [ ] Implement constructor
  - [ ] Add core methods:
    - [ ] play()
    - [ ] pause()
    - [ ] setSpeed(wpm: number)
    - [ ] loadContent(text: string)
    - [ ] getCurrentWord()
    - [ ] getCurrentIndex()
  - [ ] Add event methods:
    - [ ] subscribe()
    - [ ] unsubscribe()
- [ ] Add TypeScript types/interfaces
- [ ] Add JSDoc comments

### 3. AuthService Implementation
- [ ] Create `src/services/AuthService.ts`
- [ ] Add imports:
  ```typescript
  import { supabase } from '../lib/supabase';
  import { AuthSession, User } from '@supabase/supabase-js';
  ```
- [ ] Implement AuthService class:
  - [ ] Add private supabaseClient property
  - [ ] Add auth methods:
    - [ ] signIn()
    - [ ] signUp()
    - [ ] signOut()
    - [ ] getSession()
    - [ ] getCurrentUser()
    - [ ] onAuthStateChange()
- [ ] Add TypeScript types/interfaces
- [ ] Add JSDoc comments

### 4. Testing Setup
- [ ] Create `src/services/__tests__` directory
- [ ] Create `ReaderService.test.ts`:
  - [ ] Test constructor
  - [ ] Test core methods
  - [ ] Test event handling
- [ ] Create `AuthService.test.ts`:
  - [ ] Test auth methods
  - [ ] Test session handling

### 5. Safety Checks
- [ ] Verify no existing functionality is broken
- [ ] Ensure services can run alongside current implementation
- [ ] Document any potential conflicts or issues
- [ ] Create rollback plan if needed

## Verification
- [ ] All tests pass
- [ ] No console errors
- [ ] Existing functionality works
- [ ] New services can be instantiated
- [ ] Event system works

## Notes
- DO NOT modify existing RSVPReader or supabase implementation yet
- Keep all new code isolated from current implementation
- Document any assumptions or decisions made
- Note any technical debt or future improvements needed

## Next Steps
- [ ] Document completion of this phase
- [ ] Update migration plan with any learnings
- [ ] Prepare for Phase 1.2: State Management 